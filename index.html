<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jogos de Descarte Consciente</title>
<style>
body { font-family:"Comic Sans MS",Arial,sans-serif; text-align:center; background: linear-gradient(to bottom,#b2fefa,#0ed2f7); color:#333; margin:0; padding:0; }
header { background:#0077b6; padding:20px; color:white; font-size:24px; font-weight:bold; }
h1 { color:#0077b6; margin-top:20px; font-size:32px; }
button { padding:12px 25px; margin:10px; font-size:18px; cursor:pointer; border-radius:12px; border:none; background:#00b4d8; color:white; transition:0.3s; }
button:hover { background:#0077b6; }
#menu button { display:block; margin:20px auto; width:60%; }
#login { max-width:400px; margin:50px auto; padding:20px; background:#caf0f8; border-radius:15px; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
input { padding:12px; font-size:16px; border-radius:10px; border:2px solid #0077b6; margin-bottom:15px; width:90%; }
.quiz-question, .cart { margin:15px; font-weight:bold; color:#023e8a; }
.cart { display:inline-block; width:100px; height:60px; line-height:60px; margin:10px; cursor:pointer; font-size:18px; border-radius:10px; text-align:center; background:#a8dadc; }
#itens-corrida { position:relative; height:250px; background:#a8dadc; border-radius:10px; overflow:hidden; margin-top:20px; }
.correct { background:#4caf50 !important; }
.wrong { background:#e63946 !important; }
</style>
</head>
<body>

<header>🌍 ÁguaFácil e Descarte Limpo</header>

<!-- LOGIN -->
<div id="login">
  <h1>Bem-vindo! Cadastre-se para jogar</h1>
  <input type="text" id="nome" placeholder="Digite seu nome">
  <input type="text" id="sobrenome" placeholder="Digite seu sobrenome">
  <button onclick="cadastrar()">Cadastrar / Jogar</button>
  <p>Ou acessar outro projeto: <a href="https://matheuspedroso851.github.io/projeto-ambiental/" target="_blank">Clique aqui</a></p>
</div>

<!-- MENU -->
<div id="menu" style="display:none;">
  <h1>Escolha um jogo</h1>
  <button onclick="iniciarQuiz()">📝 Quiz</button>
  <button onclick="iniciarMemoria()">🃏 Jogo da Memória</button>
  <button onclick="iniciarCorrida()">🏃‍♂️ Corrida do Resíduo</button>
</div>

<!-- QUIZ -->
<div id="quiz" style="display:none;">
  <h2>♻️ Quiz: Descarte Consciente</h2>
  <div id="quiz-container"></div>
  <p id="pontuacao">Pontuação: 0</p>
</div>

<!-- MEMÓRIA -->
<div id="memoria" style="display:none;">
  <h2>🃏 Jogo da Memória</h2>
  <div id="cartas"></div>
  <p id="pontuacao-memoria">Pontuação: 0</p>
</div>

<!-- CORRIDA -->
<div id="corrida" style="display:none;">
  <h2>🏃‍♂️ Corrida do Resíduo</h2>
  <div id="itens-corrida"></div>
  <p id="pontuacao-corrida">Pontuação: 0</p>
  <p id="tempo-corrida">Tempo restante: 30s</p>
</div>

<script>
// ===== CADASTRO =====
let jogadorAtual = null;
function cadastrar(){
  const nome = document.getElementById('nome').value.trim();
  const sobrenome = document.getElementById('sobrenome').value.trim();
  if(!nome || !sobrenome){ alert("Preencha nome e sobrenome!"); return; }

  let ranking = JSON.parse(localStorage.getItem('ranking')) || [];
  const existe = ranking.find(j => j.nome === nome && j.sobrenome === sobrenome);
  if(existe){ alert("Nome e sobrenome já cadastrados!"); return; }

  jogadorAtual = { nome, sobrenome, total:0, quiz:false, memoria:false, corrida:false };
  ranking.push(jogadorAtual);
  localStorage.setItem('ranking', JSON.stringify(ranking));
  localStorage.setItem('jogadorAtual', JSON.stringify(jogadorAtual));

  document.getElementById('login').style.display='none';
  document.getElementById('menu').style.display='block';
}

// ===== MENU =====
function mostrar(jogo){
  document.getElementById('quiz').style.display='none';
  document.getElementById('memoria').style.display='none';
  document.getElementById('corrida').style.display='none';
  document.getElementById(jogo).style.display='block';
}

// ===== FINALIZAR JOGO =====
function finalizarJogo(){
  let ranking = JSON.parse(localStorage.getItem('ranking')) || [];
  const index = ranking.findIndex(j => j.nome === jogadorAtual.nome && j.sobrenome === jogadorAtual.sobrenome);
  if(index>=0) ranking[index] = jogadorAtual; else ranking.push(jogadorAtual);
  localStorage.setItem('ranking', JSON.stringify(ranking));
  // redireciona para Google Forms
  window.location.href="https://forms.gle/seuformulario";
}

// ===== QUIZ =====
const perguntas = [
  {pergunta:"Onde devemos jogar uma garrafa plástica?", opcoes:["No lixo comum","Na coleta seletiva","No rio"], resposta:1},
  {pergunta:"O que acontece quando jogamos óleo na pia?", opcoes:["Ajuda","Polui","Nada"], resposta:1},
  {pergunta:"Qual material demora mais para se decompor?", opcoes:["Papel","Vidro","Casca"], resposta:1},
  {pergunta:"O que devemos fazer com pilhas usadas?", opcoes:["Jogar no lixo comum","Levar a um ponto de coleta","Queimar"], resposta:1},
  {pergunta:"Qual dessas ações ajuda a economizar água?", opcoes:["Deixar a torneira aberta","Consertar vazamentos","Tomar banho longo"], resposta:1},
  {pergunta:"O que significa reciclar?", opcoes:["Reutilizar materiais","Descartar no lixo","Queimar o lixo"], resposta:0},
  {pergunta:"O vidro deve ser descartado em qual tipo de coleta?", opcoes:["Coleta comum","Coleta seletiva","Não se recicla"], resposta:1},
  {pergunta:"O que podemos fazer com papel usado?", opcoes:["Reutilizar ou reciclar","Queimar","Descartar na rua"], resposta:0},
  {pergunta:"Por que é importante separar o lixo?", opcoes:["Para reduzir poluição","Para enfeitar a casa","Para economizar dinheiro"], resposta:0},
  {pergunta:"Qual desses não deve ir para o lixo orgânico?", opcoes:["Casca de fruta","Restos de comida","Plástico"], resposta:2},
];

let perguntasEmbaralhadas = [];
let pontuacaoQuiz = 0, perguntaAtual = 0;
const quizContainer = document.getElementById('quiz-container');

function iniciarQuiz(){
  if(jogadorAtual.quiz){ alert("Você já jogou o Quiz!"); return; }
  perguntaAtual = 0; pontuacaoQuiz = 0;
  perguntasEmbaralhadas = perguntas.sort(()=>0.5-Math.random());
  mostrar('quiz'); mostrarPergunta();
}

function mostrarPergunta(){
  if(perguntaAtual >= perguntasEmbaralhadas.length){
    jogadorAtual.total += pontuacaoQuiz;
    jogadorAtual.quiz = true;
    localStorage.setItem('jogadorAtual', JSON.stringify(jogadorAtual));
    finalizarJogo();
    return;
  }
  quizContainer.innerHTML='';
  let q = perguntasEmbaralhadas[perguntaAtual];
  let div = document.createElement('div'); div.className='quiz-question'; div.textContent = q.pergunta;
  quizContainer.appendChild(div);
  q.opcoes.forEach((o,i)=>{
    let btn = document.createElement('button'); btn.textContent=o;
    btn.onclick = ()=>verificarResposta(i,btn);
    quizContainer.appendChild(btn);
  });
}

function verificarResposta(i,btn){
  const correta = perguntasEmbaralhadas[perguntaAtual].resposta;
  const botoes = quizContainer.querySelectorAll('button');
  botoes.forEach(b=>b.disabled=true);
  if(i===correta){ pontuacaoQuiz++; btn.classList.add('correct'); btn.textContent='✅ '+btn.textContent; }
  else { btn.classList.add('wrong'); btn.textContent='❌ '+btn.textContent; botoes[correta].classList.add('correct'); botoes[correta].textContent='✅ '+botoes[correta].textContent; }
  perguntaAtual++; setTimeout(mostrarPergunta,1000);
}

// ===== MEMÓRIA =====
const tipos = ['Plástico','Vidro','Papel','Metal','Orgânico','Lata'];
let pontuacaoMemoria=0, primeira=null, segunda=null;

function iniciarMemoria(){
  if(jogadorAtual.memoria){ alert("Você já jogou Memória!"); return; }
  pontuacaoMemoria=0; primeira=null; segunda=null;
  criarMemoria(); mostrar('memoria');
}

function criarMemoria(){
  const cartasDiv = document.getElementById('cartas');
  cartasDiv.innerHTML='';
  let shuffled = tipos.concat(tipos).sort(()=>0.5-Math.random());
  shuffled.forEach(t=>{
    let div = document.createElement('div'); div.className='cart'; div.dataset.tipo=t; div.textContent='?';
    div.onclick=()=>virarCarta(div); cartasDiv.appendChild(div);
  });
}

function virarCarta(carta){
  if(primeira && segunda) return;
  carta.textContent=carta.dataset.tipo;
  if(!primeira){ primeira=carta; return; }
  segunda = carta;
  if(primeira.dataset.tipo===segunda.dataset.tipo){ pontuacaoMemoria++; primeira=null; segunda=null; }
  else{ setTimeout(()=>{ primeira.textContent='?'; segunda.textContent='?'; primeira=null; segunda=null; },1000); }
  document.getElementById('pontuacao-memoria').textContent='Pontuação: '+pontuacaoMemoria;
  if(pontuacaoMemoria === tipos.length){ jogadorAtual.total += pontuacaoMemoria; jogadorAtual.memoria=true; localStorage.setItem('jogadorAtual', JSON.stringify(jogadorAtual)); finalizarJogo(); }
}

// ===== CORRIDA =====
let pontuacaoCorrida=0, tempoCorrida=30, corridaInterval, tempoInterval;
const residuos=[ {tipo:'Plástico', correto:true},{tipo:'Vidro', correto:true},{tipo:'Papel', correto:true},{tipo:'Lata', correto:false},{tipo:'Orgânico', correto:false},{tipo:'Metal', correto:false} ];

function iniciarCorrida(){
  if(jogadorAtual.corrida){ alert("Você já jogou Corrida!"); return; }
  mostrar('corrida');
  pontuacaoCorrida=0; tempoCorrida=30;
  const corridaDiv = document.getElementById('itens-corrida');
  corridaDiv.innerHTML=''; document.getElementById('pontuacao-corrida').textContent='Pontuação: 0'; document.getElementById('tempo-corrida').textContent='Tempo restante: 30s';
  clearInterval(corridaInterval); clearInterval(tempoInterval);

  corridaInterval = setInterval(()=>criarItemCorrida(corridaDiv),1000);
  tempoInterval = setInterval(()=>{
    tempoCorrida--;
    document.getElementById('tempo-corrida').textContent='Tempo restante: '+tempoCorrida+'s';
    if(tempoCorrida<=0) finalizarCorrida();
  },1000);
}

function criarItemCorrida(corridaDiv){
  let itemData = residuos[Math.floor(Math.random()*residuos.length)];
  let div = document.createElement('div'); div.textContent=itemData.tipo;
  div.style.position='absolute'; div.style.left=Math.random()*400+'px'; div.style.top='0px'; div.style.width='100px'; div.style.height='40px'; div.style.lineHeight='40px';
  div.style.background='#0077b6'; div.style.color='#fff'; div.style.fontWeight='bold'; div.style.borderRadius='5px'; div.style.cursor='pointer';
  div.dataset.correto=itemData.correto; corridaDiv.appendChild(div);

  div.onclick=()=>{
    if(itemData.correto) pontuacaoCorrida+=10;
    document.getElementById('pontuacao-corrida').textContent='Pontuação: '+pontuacaoCorrida;
    if(corridaDiv.contains(div)) corridaDiv.removeChild(div);
  };

  let pos=0;
  const anim = setInterval(()=>{
    pos+=5; div.style.top=pos+'px';
    if(pos>=200){ clearInterval(anim); if(corridaDiv.contains(div)) corridaDiv.removeChild(div); }
  },50);
}

function finalizarCorrida(){
  clearInterval(corridaInterval); clearInterval(tempoInterval);
  jogadorAtual.total+=pontuacaoCorrida; jogadorAtual.corrida=true;
  localStorage.setItem('jogadorAtual', JSON.stringify(jogadorAtual));
  finalizarJogo();
}
</script>

</body>
</html>
